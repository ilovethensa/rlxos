From e720327393a94fa8e5b69041ed6081003abab35c Mon Sep 17 00:00:00 2001
From: "manjeet.singh1" <manjeet.singh@bobble.ai>
Date: Thu, 13 Jan 2022 14:17:03 +0530
Subject: [PATCH] set default url

---
 ...ult-package-type-rlx-remove-pkg-type.patch | 60 +++++++++++++++++++
 libpkgupd/defines.hh                          |  4 +-
 2 files changed, 62 insertions(+), 2 deletions(-)
 create mode 100644 0001-set-default-package-type-rlx-remove-pkg-type.patch

diff --git a/0001-set-default-package-type-rlx-remove-pkg-type.patch b/0001-set-default-package-type-rlx-remove-pkg-type.patch
new file mode 100644
index 0000000..a224631
--- /dev/null
+++ b/0001-set-default-package-type-rlx-remove-pkg-type.patch
@@ -0,0 +1,60 @@
+From 6599890cd2995165a1e3482c3cf63ae74e5c1f44 Mon Sep 17 00:00:00 2001
+From: "manjeet.singh1" <manjeet.singh@bobble.ai>
+Date: Thu, 13 Jan 2022 14:15:27 +0530
+Subject: [PATCH] set default package type: rlx, remove 'pkg' type
+
+---
+ libpkgupd/pkginfo.hh | 5 -----
+ libpkgupd/recipe.cc  | 6 +-----
+ 2 files changed, 1 insertion(+), 10 deletions(-)
+
+diff --git a/libpkgupd/pkginfo.hh b/libpkgupd/pkginfo.hh
+index 28321cc..1910196 100644
+--- a/libpkgupd/pkginfo.hh
++++ b/libpkgupd/pkginfo.hh
+@@ -16,7 +16,6 @@ class pkginfo {
+   enum class pkgtype : int {
+     APP,
+     RLX,
+-    PKG,
+   };
+   class user {
+    private:
+@@ -110,8 +109,6 @@ class pkginfo {
+       return pkgtype::APP;
+     } else if (t == "rlx") {
+       return pkgtype::RLX;
+-    } else if (t == "pkg") {
+-      return pkgtype::PKG;
+     } else {
+       throw std::runtime_error("invalid pkgtype " + t + " specified");
+     }
+@@ -121,8 +118,6 @@ class pkginfo {
+     switch (t) {
+       case pkgtype::APP:
+         return "app";
+-      case pkgtype::PKG:
+-        return "pkg";
+       case pkgtype::RLX:
+         return "rlx";
+       default:
+diff --git a/libpkgupd/recipe.cc b/libpkgupd/recipe.cc
+index 7a1f613..147e47e 100644
+--- a/libpkgupd/recipe.cc
++++ b/libpkgupd/recipe.cc
+@@ -73,11 +73,7 @@ std::string recipe::package::version() const { return _parent->_version; }
+ std::string recipe::package::about() const { return _parent->_about; }
+ 
+ pkginfo::pkgtype recipe::package::type() const { 
+-  if (_pack == "app") {
+-    return pkgtype::APP;
+-  } else {
+-    return pkgtype::PKG;
+-  }
++  return pkginfo::str2pkgtype(_pack);
+ }
+ 
+ std::vector<std::string> recipe::package::depends(bool all) const {
+-- 
+2.32.0
+
diff --git a/libpkgupd/defines.hh b/libpkgupd/defines.hh
index 90d919c..88d23ea 100644
--- a/libpkgupd/defines.hh
+++ b/libpkgupd/defines.hh
@@ -69,8 +69,8 @@ class object {
 #define DEFAULT_SRC_DIR "/var/cache/pkgupd/src"
 #define DEFAULT_REPO_DIR "/var/cache/pkgupd/recipes"
 #define DEFAULT_ROOT_DIR "/"
-#define DEFAULT_URL "https://rlxos.cloudtb.online/pkgs"
-#define DEFAULT_SECONDARY_URL "https://apps.rlxos.dev/pkgs"
+#define DEFAULT_URL "https://rlxos.cloudtb.online/2200/pkgs"
+#define DEFAULT_SECONDARY_URL "https://apps.rlxos.dev/2200/pkgs"
 
 #define DEFAULT_ARCHIVE_TOOL "tar"
 #define BUG_URL "https://rlxos.dev/bugs"
-- 
2.32.0

