From 944d7b72f015d09635a1e1659441ed7ab9b0da2d Mon Sep 17 00:00:00 2001
From: itsmanjeet <itsmanjeet1998@gmail.com>
Date: Thu, 18 Nov 2021 17:03:08 +0530
Subject: [PATCH] added sensitivity to button for better UI

---
 firstlogin/setup.go |  9 +++++----
 firstlogin/user.go  | 10 ++++++++++
 2 files changed, 15 insertions(+), 4 deletions(-)

diff --git a/firstlogin/setup.go b/firstlogin/setup.go
index 6d5ecfb..2ac455a 100644
--- a/firstlogin/setup.go
+++ b/firstlogin/setup.go
@@ -20,6 +20,7 @@ type FirstLogin struct {
 	timeZoneList *gtk.ListBox
 
 	UserAccountPage *app.Page
+	createUserBtn   *gtk.Button
 
 	ProcessPage  *app.Page
 	postProgress *gtk.ProgressBar
@@ -130,10 +131,10 @@ func Setup(win *gtk.Assistant) error {
 	})
 	f.UserAccountPage.Box.PackStart(passwdBox, false, false, 0)
 
-	createUserBtn, _ := gtk.ButtonNewWithLabel("Create")
-	createUserBtn.SetHAlign(gtk.ALIGN_CENTER)
-	f.UserAccountPage.PackStart(createUserBtn, false, false, 0)
-	createUserBtn.Connect("clicked", func() {
+	f.createUserBtn, _ = gtk.ButtonNewWithLabel("Create")
+	f.createUserBtn.SetHAlign(gtk.ALIGN_CENTER)
+	f.UserAccountPage.PackStart(f.createUserBtn, false, false, 0)
+	f.createUserBtn.Connect("clicked", func() {
 
 		userid, _ := useridBox.GetText()
 		passwd, _ := passwdBox.GetText()
diff --git a/firstlogin/user.go b/firstlogin/user.go
index 67a155b..4e33c4c 100644
--- a/firstlogin/user.go
+++ b/firstlogin/user.go
@@ -22,6 +22,16 @@ func (f *FirstLogin) createUser(userid, passwd string) {
 		})
 	}
 
+	glib.IdleAdd(func() {
+		f.createUserBtn.SetSensitive(false)
+	})
+
+	defer func() {
+		glib.IdleAdd(func() {
+			f.createUserBtn.SetSensitive(true)
+		})
+	}()
+
 	checkEntry := func(data string, entry string) bool {
 		if len(data) == 0 {
 			showError("Please Input value in " + entry)
-- 
2.32.0

