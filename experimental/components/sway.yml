id: sway
version: 1.6.1
about: Tiling Wayland compositor and replacement for the i3 window manager
license: MIT
depends:
  runtime:
    - cairo
    - gdk-pixbuf
    - libevdev
    - libinput
    - json-c
    - systemd
    - wayland
    - wlroots
    - libxcb
    - libxkbcommon
    - pango
    - pcre
  buildtime:
    - meson
    - ninja
    - setconf
    - wayland-protocols
sources:
  - https://github.com/swaywm/sway/releases/download/{{version}}/sway-{{version}}.tar.gz
pre-script: |
  sed -i "s/branch \\\'@1@\\\'/rlxos/g" meson.build
configure: >
  -D sd-bus-provider=libsystemd
  -D werror=false
  -D b_ndebug=true
post-script: |
  install -v -D -m 0644 ${FILES_DIR}/50-systemd-user.conf -t ${pkgupd_pkgdir}/etc/sway/config.d/
  install -v -D -m 0644 LICENSE -t ${pkgupd_pkgdir}/usr/share/doc/{{id}}/

  for i in autoname-workspaces.py \
           inactive-windows-transparency.py \
           grimshot ; do
    install -D -m 0755 contrib/${i} -t \
        ${pkgupd_pkgdir}/usr/share/{{id}}/scripts/
  done
           
