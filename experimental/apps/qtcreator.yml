id: qtcreator
version: 7.0.2
release: 5
about: A cross-platform Qt IDE 
depends:
  buildtime:
    - llvm
    - cmake
    - qt
    - libyaml-cpp
    - libgcrypt
    - python
    - appimagetool
build-dir: qt-creator-opensource-src-{{version}}
sources:
  - https://download.qt.io/official_releases/qtcreator/7.0/{{version}}/qt-creator-opensource-src-{{version}}.tar.xz

type: app
bundle: true
category: development
tags:
  - qt
  - development
  - c++
  - cpp
  - graphics
  - ide
configure: >
  -DCMAKE_INSTALL_PREFIX=/usr
  -DCMAKE_INSTALL_LIBEXECDIR=lib
  -DWITH_DOCS=ON
  -DWITH_DEVELOPER_DOCS=ON
  -DQTC_CLANG_BUILDMODE_MATCH=ON
  -DBUILD_HELVIEWERBACKEND_QTWEBENGINE=ON

post-script: |
  cd ${pkgupd_pkgdir}
  mv usr/share/applications/org.qt-project.qtcreator.desktop {{id}}.desktop
  sed -i 's#TryExec=.*##' {{id}}.desktop
  sed -i 's#Icon=.*#Icon={{id}}#' {{id}}.desktop
  mv ${FILES_DIR}/{{id}}.svg {{id}}.png
  install -v -D -m 0755 ${FILES_DIR}/AppRun AppRun

  # install qt5 plugins and specs
  cp /usr/lib/qt5/ ${pkgupd_pkgdir}/usr/lib/ -a