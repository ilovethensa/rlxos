id: org.gnome.Builder
name: Gnome Builder
version: 3.36.0
about: An IDE for writing GNOME base software
license: GPL3
type: app

depends:
  runtime:
    - glib

script: |
  mkdir -p AppDir
  pkgupd-image generate gnome-builder
  pkgupd-image cleanup
  pkgupd-image union
  glib-compile-schemas AppDir/usr/share/glib-2.0/schemas
  cp AppDir/usr/share/applications/org.gnome.Builder.desktop AppDir/
  cp AppDir/usr/share/icons/hicolor/scalable/apps/org.gnome.Builder.svg AppDir/org.gnome.Builder.png

  mv AppDir ${pkgupd_pkgdir}

AppRun: |
  #!/bin/sh
  SELF=$(readlink -f "$0")
  HERE=${SELF%/*}
  export UNION_PRELOAD=${HERE}
  export LD_PRELOAD="${HERE}/libunionpreload.so"
  export PATH="${HERE}/usr/bin/:${HERE}/usr/sbin/:${HERE}/usr/games/:${HERE}/bin/:${HERE}/sbin/${PATH:+:$PATH}"
  export LD_LIBRARY_PATH="${HERE}/usr/lib/:${HERE}/usr/lib/i386-linux-gnu/:${HERE}/usr/lib/x86_64-linux-gnu/:${HERE}/usr/lib32/:${HERE}/usr/lib64/:${HERE}/lib/:${HERE}/lib/i386-linux-gnu/:${HERE}/lib/x86_64-linux-gnu/:${HERE}/lib32/:${HERE}/lib64/${LD_LIBRARY_PATH:+:$LD_LIBRARY_PATH}"
  export PYTHONPATH="${HERE}/usr/share/pyshared/${PYTHONPATH:+:$PYTHONPATH}"
  export XDG_DATA_DIRS="${HERE}/usr/share/${XDG_DATA_DIRS:+:$XDG_DATA_DIRS}"
  export PERLLIB="${HERE}/usr/share/perl5/:${HERE}/usr/lib/perl5/${PERLLIB:+:$PERLLIB}"
  export GSETTINGS_SCHEMA_DIR="${HERE}/usr/share/glib-2.0/schemas/${GSETTINGS_SCHEMA_DIR:+:$GSETTINGS_SCHEMA_DIR}"
  export QT_PLUGIN_PATH="${HERE}/usr/lib/qt4/plugins/:${HERE}/usr/lib/i386-linux-gnu/qt4/plugins/:${HERE}/usr/lib/x86_64-linux-gnu/qt4/plugins/:${HERE}/usr/lib32/qt4/plugins/:${HERE}/usr/lib64/qt4/plugins/:${HERE}/usr/lib/qt5/plugins/:${HERE}/usr/lib/i386-linux-gnu/qt5/plugins/:${HERE}/usr/lib/x86_64-linux-gnu/qt5/plugins/:${HERE}/usr/lib32/qt5/plugins/:${HERE}/usr/lib64/qt5/plugins/${QT_PLUGIN_PATH:+:$QT_PLUGIN_PATH}"
  EXEC=gnome-builder
  exec "${EXEC}" "$@"
