id: mono
version: 6.12.0.122
about: Free implementation of the .NET platform including runtime and compiler
depends:
  runtime:
    - ca-certificates
    - libgdiplus
    - python
    - zlib
  buildtime:
    - cmake

sources:
  - https://download.mono-project.com/sources/mono/mono-{{version}}.tar.xz
environ:
  - CFLAGS+=' -ffat-lto-objects'

script: |
  ./autogen.sh \
    --prefix=/usr \
    --sysconfdir=/etc \
    --bindir=/usr/bin \
    --sbindir=/usr/bin \
    --with-mcs-docs=no

  make
  make install DESTDIR=${pkgupd_pkgdir}

  mkdir -p ${pkgupd_pkgdir}/usr/lib/binfmt.d/
files:
  - path: usr/lib/binfmt.d/mono.conf
    content: |
      :CLR:M::MZ::/usr/bin/mono: