id: miniupnpc
version: 2.2.3
about: Small UPnP client library/tool to access Internet Gateway Devices
depends:
  runtime:
    - glibc
  buildtime:
    - lsb-release
    - python
    - py-setuptools
license: BSD
sources:
  - https://miniupnp.tuxfamily.org/files/{{id}}-{{version}}.tar.gz
  - https://github.com/miniupnp/miniupnp/commit/ed1dc4bb.patch
build-dir: miniupnpc-{{version}}
pre-script: |
  patch -p2 -i ../ed1dc4bb.patch

script: |
  make
  python setup.py build

  make install DESTDIR=${pkgupd_pkgdir}
  python setup.py install --optimize=1 --skip-build --root=${pkgupd_pkgdir}
  install -v -D -m 0644 man3/miniupnpc.3 -t ${pkgupd_pkgdir}/usr/share/man/man3
  install -v -D -m 0644 LICENSE -t ${pkgupd_pkgdir}/usr/share/doc/{{id}}/