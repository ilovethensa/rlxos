id: proot
version: 5.1.0
about: chroot, mount --bind, and binfmt_misc without privilege/setup
depends:
  runtime:
    - talloc
  buildtime:
    - libxslt
sources:
  - proot-v{{version}}.tar.gz::https://github.com/cedric-vincent/proot/archive/v{{version}}.tar.gz
build-dir: proot-{{version}}

pre-script: |
  patch -p1 -i ${FILES_DIR}/0001-Fix-use-of-size.patch

script: |
  make -f GNUmakefile -C src
  make -f GNUmakefile -C doc

  install -v -D -m 0755 src/{{id}} -t ${pkgupd_pkgdir}/usr/bin/
  install -v -D -m 0644 doc/proot/man.1 "${pkgdir}"/usr/share/man/man1/{{id}}.1