id: lxc
version: 4.0.12
about: Linux containers
license: GPL
depends:
  runtime:
    - libcap
    - libseccomp
    - perl
    - python
    - rsync
    - wget
  buildtime:
    - lua
    - py-setuptools
sources:
  - https://linuxcontainers.org/downloads/lxc/lxc-{{version}}.tar.gz
pre-script: ./autogen.sh
configure: >
  --enable-seccomp
  --enable-capabilities
  --enable-pam
  --with-pamdir=/usr/lib/security
  --disable-werror
  --with-init-script=systemd
  --with-systemdsystemunitdir=/usr/lib/systemd/system
post-script: |
  install -d -m755 "${pkgupd_pkgdir}/var/lib/lxc"
  install -d -m755 "${pkgupd_pkgdir}/usr/lib/lxc/rootfs/dev"
  install -D -m644 ${FILES}/lxc/lxc.service "${pkgupd_pkgdir}"/usr/lib/systemd/system/lxc@.service
  install -D -m644 ${FILES}/lxc/lxc-auto.service "${pkgupd_pkgdir}"/usr/lib/systemd/system/lxc-auto.service