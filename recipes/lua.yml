id: lua
version: 5.4.3
about: |
  A powerful light-weight programming language designed for extending applications

sources:
  - https://www.lua.org/ftp/lua-5.4.3.tar.gz
  - https://www.linuxfromscratch.org/patches/blfs/svn/lua-5.4.3-shared_library-1.patch

packages:
  - id: pkg
    dir: lua-5.4.3
    plugin: script
    script: |
      patch -Np1 -i ../lua-5.4.3-shared_library-1.patch
      make linux
      make INSTALL_TOP=${pkgupd_pkgdir}/usr \
        INSTALL_DATA="cp -d" \
        INSTALL_MAN=${pkgupd_pkgdir}/usr/share/man/man1 \
        TO_LIB="liblua.so liblua.so.5.4 liblua.so.5.4.3" \
        install

      install -v -D -m 644 ${FILES}/lua/lua.pc -t ${pkgupd_pkgdir}/usr/lib/pkgconfig/
