id: cyrus-sasl
version: 2.1.27
about: |
  A Simple Authentication and Security Layer

depends:
  runtime:
    - berkeley-db
    - pam
    - kerberos-v5

sources:
  - https://github.com/cyrusimap/cyrus-sasl/releases/download/cyrus-sasl-2.1.27/cyrus-sasl-2.1.27.tar.gz

packages:
  - id: pkg
    dir: cyrus-sasl-2.1.27
    flags:
      - id: configure
        value: >
          --enable-auth-sasldb
          --with-dbpath=/var/lib/sasl/sasldb2
          --with-sphnix-build=no
          --with-saslauthd=/var/run/saslauthd

      - id: compile
        value: -j1
    postscript: |
      install -v -dm700 ${pkgupd_pkgdir}/var/lib/sasl
