id: cups
version: 2.3.3op2
release: 1
about: |
  Common Unix Printing System (CUPS) is a print spooler and associated utilities

depends:
  runtime:
    - gnutls
    - colord
    - dbus
    - libusb
    - pam
    - xdg-utils
    - desktop-file-utils

groups:
  - id: 19
    name: lpadmin

users:
  - id: 9
    name: lp
    group: 19
    about: Print Service User
    dir: /var/spool/cups
    shell: /bin/false

sources:
  - https://github.com/OpenPrinting/cups/releases/download/v{{version}}/cups-{{version}}-source.tar.gz

autoconf-dir: true
configure: --with-system-groups=lpadmin
post-script: |
  mkdir -p ${pkgupd_pkgdir}/etc/cups/
  echo "ServerName /run/cups/cups.sock" > ${pkgupd_pkgdir}/etc/cups/client.conf
  install -v -D -m 644 ${FILES}/pam/cups -t ${pkgupd_pkgdir}/etc/pam.d/
