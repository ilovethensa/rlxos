id: plymouth
version: 22.02.122
release: 4
about: A graphical boot splash screen with KMS
license: GPL
depends:
  runtime:
    - libdrm
    - pango
    - systemd
    - xf86-video-fbdev
    - docbook-xsl
build-dir: plymouth-{{version}}
sources:
  - https://gitlab.freedesktop.org/plymouth/plymouth/-/archive/{{version}}/plymouth-{{version}}.tar.gz
environ:
  - LDFLAGS+=" -ludev"
    
script: |
  ./autogen.sh \
    --prefix=/usr \
    --exec-prefix=/usr \
    --sysconfdir=/etc \
    --localstatedir=/var \
    --libdir=/usr/lib \
    --libexecdir=/usr/lib \
    --sbindir=/usr/bin \
    --enable-systemd-integration \
    --enable-drm \
    --enable-tracing \
    --enable-pango \
    --enable-gtk=no \
    --with-release-file=/etc/os-release \
    --with-logo=/usr/share/plymouth/rlxos-logo.png \
    --with-background-color=0x000000 \
    --with-background-start-color-stop=0x000000 \
    --with-background-end-color-stop=0x4D4D4D \
    --without-rhgb-compat-link \
    --without-system-root-install \
    --with-runtimedir=/run
  
  make

  make DESTDIR="${pkgupd_pkgdir}" install

  cp ${FILES}/logo/logo.png ${pkgupd_pkgdir}/usr/share/plymouth/rlxos-logo.png

  cp ${FILES_DIR}/plymouthd.conf ${pkgupd_pkgdir}/etc/plymouth/plymouthd.conf