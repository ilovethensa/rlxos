id: cheese
version: 3.38.0
about: |
  Take photos and videos with fun graphical effects

depends:
  runtime:
    - clutter-gst
    - clutter-gtk
    - gnome-desktop
    - gst-plugins-bad
    - gst-plugins-good
    - v4l-utils
    - libcanberra
    - libgudev
    - gnome-video-effects
    
  buildtime:
    - gobject-introspection
    - vala

sources:
  - https://download.gnome.org/sources/cheese/3.38/cheese-3.38.0.tar.xz
  - https://www.linuxfromscratch.org/patches/blfs/svn/cheese-3.38.0-upstream_fixes-1.patch

packages:
  - id: pkg
    dir: cheese-3.38.0
    prescript: |
      sed -i "s/&version;/3.38.0/" docs/reference/cheese{,-docs}.xml
      patch -Np1 -i ../cheese-3.38.0-upstream_fixes-1.patch

    flags:
      - id: configure
        value: >
          --buildtype=release
          -D gtk_doc=false
