id: pkgupd
version: 2200
release: 21
commit: d105d44298f1884ccb68618da1b25ddc1affb7b1
about: |
  An Extensible package manager for rlxos

depends: 
  runtime: 
    - libyaml-cpp
    - curl
    - zstd
    - libarchive
    - tar
    - bash
    
  buildtime: 
    - cmake

sources:
  - pkgupd-{{version}}-{{commit}}.tar.gz::https://github.com/itsmanjeet/pkgupd/archive/{{commit}}.tar.gz

build-dir: pkgupd-{{commit}}
configure: -DINSTALL_GTEST=OFF
post-script: |
  mkdir -p ${pkgupd_pkgdir}/usr/lib/
  cp _pkgupd_builddir/liblibpkgupd.a ${pkgupd_pkgdir}/usr/lib/libpkgupd.a
  mkdir -p ${pkgupd_pkgdir}/usr/include
  mkdir -p ${pkgupd_pkgdir}/etc

files:
  - path: etc/pkgupd.yml
    content: |
      version: 2200
      mirrors:
        - https://rlxos.dev/storage/stable
      repos:
        - core
        - extra
