id: snowball
version: 2.2.0
about: String processing language for creating stemming algorithms
sources:
  - snowball-{{version}}.tar.gz::https://github.com/snowballstem/snowball/archive/refs/tags/v{{version}}.tar.gz
build-dir: snowball-{{version}}
script: |
  patch -Np1 -i ${FILES_DIR}/dynamiclib.diff
  make

  install -Dt ${pkgupd_pkgdir}/usr/bin/ snowball stemwords
  install -Dt ${pkgupd_pkgdir}/usr/share/doc/{{id}}/LICENSE -m644 COPYING
  install -Dt ${pkgupd_pkgdir}/usr/include -m644 include/libstemmer.h
  
  install -Dm644 libstemmer.so.0 ${pkgupd_pkgdir}/usr/lib/libstemmer.so.0.0.0
  ln -s libstemmer.so.0.0.0 ${pkgupd_pkgdir}/usr/lib/libstemmer.so.0
  ln -s libstemmer.so.0 ${pkgupd_pkgdir}/usr/lib/libstemmer.so
  install -Dt ${pkgupd_pkgdir}/usr/share/doc/libstemmer/LICENSE -m644 COPYING

split:
  - into: libstemmer
    about: Stemming library supporting several languages
    files:
      - usr/lib/libstemmer.so.0.0.0
      - usr/lib/libstemmer.so.0
      - usr/lib/libstemmer.so
      - usr/include/libstemmer.h
