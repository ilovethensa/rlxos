id: chrome
version: 102.0.5005.115
release: 1
about: The popular and trusted web browser by Google (Stable Channel)

depends:
  buildtime:
    - appimagetool
sources:
  - https://dl.google.com/linux/chrome/deb/pool/main/g/google-chrome-stable/google-chrome-stable_{{version}}-1_amd64.deb
strip: false
type: app
build-dir: .
script: |
  bsdtar -xf ${PKGUPD_SRCDIR}/google-chrome-stable_{{version}}-1_amd64.deb

  mkdir -p ${pkgupd_pkgdir}/
  bsdtar -xf data.tar.xz -C ${pkgupd_pkgdir}/

  cp ${FILES_DIR}/{{id}}.svg ${pkgupd_pkgdir}/chrome.png
  cp ${pkgupd_pkgdir}/usr/share/applications/google-chrome.desktop ${pkgupd_pkgdir}/chrome.desktop

  install -v -D -m 0755 ${FILES_DIR}/AppRun -t ${pkgupd_pkgdir}/
  
  sed -i 's#Icon=.*#Icon=chrome##g' ${pkgupd_pkgdir}/chrome.desktop
