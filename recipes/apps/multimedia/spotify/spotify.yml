id: spotify
version: 1.1.84.716.gc5f8b819
release: 1
about: A proprietary music streaming service
depends:
  buildtime:
    - curl
    - appimagetool
license: custom
category: multimedia
tags:
  - spotify

type: app
sources:
  - http://repository.spotify.com/pool/non-free/s/spotify-client/spotify-client_{{version}}_amd64.deb
build-dir: .
script: |
  bsdtar -xf spotify-client_{{version}}_amd64.deb
  tar -xaf data.tar.gz
  mv usr/share/spotify ${pkgupd_pkgdir}
  cp ${pkgupd_pkgdir}/icons/spotify-linux-128.png ${pkgupd_pkgdir}/spotify.png
  sed -i 's|Icon=.*|Icon=spotify|' ${pkgupd_pkgdir}/spotify.desktop

  install -v -D -m 0755 ${FILES_DIR}/AppRun -t ${pkgupd_pkgdir}/

  # FIX: libcurl-gnutls is debian specific
  cp /usr/lib/libcurl.so.4.7.0 ${pkgupd_pkgdir}/libcurl-gnutls.so.4