id: codium
version: 1.63.2
about: Free/Libre Open Source Software Binaries of VS Code
license: MIT
tags:
  - developer
  - editor
  - ide
category: development
depends:
  buildtime:
    - appimagetool

packages:
  - id: pkg
    pack: app
    sources:
      - codium-{{version}}.AppImage::https://github.com/VSCodium/vscodium/releases/download/{{version}}/VSCodium-{{version}}-1639700424.glibc2.17-x86_64.AppImage

    dir: .
    script: |
      chmod +x codium-{{version}}.AppImage
      ./codium-{{version}}.AppImage --appimage-extract
      mv squashfs-root ${pkgupd_pkgdir}
      # cleanup libraries
      rm ${pkgupd_pkgdir}/lib/x86_64-linux-gnu/liblzma.so*
      mv ${pkgupd_pkgdir}/vscodium.png ${pkgupd_pkgdir}/codium.png
      sed -i 's|vscodium|codium|' ${pkgupd_pkgdir}/codium.desktop
