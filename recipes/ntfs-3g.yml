id: ntfs-3g
version: 2017.2.23
about: |
  A stable, read-write open source driver for NTFS partitions

depends:
  runtime:
    - fuse2

sources:
  - https://tuxera.com/opensource/ntfs-3g_ntfsprogs-2017.3.23.tgz

packages:
  - id: pkg
    dir: ntfs-3g_ntfsprogs-2017.3.23
    prescript: |
      sed -i "s|/sbin|\$(rootsbindir)|" {ntfsprogs,src}/Makefile.in

    flags:
      - id: configurator
        value: configure
        
      - id: configure
        value: >
          --disable-static
          --with-fuse=external
          --enable-posix-acls
          --enable-extras
          --enable-crypto
          --disable-ldconfig
    
      - id: install
        value: rootbindir=/usr/bin rootsbindir=/usr/bin rootlibdir=/usr/lib
      
    postscript: |
      ln -s /usr/bin/ntfs-3g ${pkgupd_pkgdir}/usr/bin/mount.ntfs