id: os-installer
version: 0.0.1
about: OS installer

pre-script: |-
  rm -fr subprojects/blueprint-compiler

post-script: |-
  install -Dm0644 -t "%{install-root}%{sysconfdir}/os-installer/" /files/%{id}/config.yaml

  for script in configure install prepare ; do
    install -Dm0644 -t "%{install-root}%{sysconfdir}/os-installer/scripts/" /files/%{id}/${script}.sh
  done

  install -vDm0644 /dev/stdin %{install-root}/%{libdir}/tmpfiles.d/%{id}.conf << "EOF"
  C %{sysconfdir}/%{id}
  EOF

depends:
  - components/gnome-desktop.yml
  - components/vte.yml
  - components/libadwaita.yml
  - components/udisks.yml
  - components/libgweather.yml
  - components/glib-networking.yml
  - components/py/py-gobject.yml
  - components/py/py-yaml.yml

sources:
  - os-installer-%{version}.tar.gz::https://github.com/itsManjeet/os-installer/archive/refs/heads/main.tar.gz
