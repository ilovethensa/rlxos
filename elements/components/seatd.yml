id: seatd
version: 0.7.0
about: A minimal seat management daemon and universal seat management library
sources:
  - https://git.sr.ht/~kennylevinsen/seatd/archive/%{version}.tar.gz

depends:
  - components/elogind.yml
build-time:
  - components/core/meson.yml

configure: >-
  -Dexamples=disabled 
  -Dserver=enabled 
  -Dlibseat-logind=elogind

post-script: |
  install -Dm0755 /files/seatd/service %{install-root}/%{sysconfdir}/rc.d/init.d/seatd

integration: |
  mkdir -p %{sysconfdir}/rc.d/rc{0..6}.d/
  ln -sf  ../init.d/seatd %{sysconfdir}/rc.d/rc0.d/K30seatd
  ln -sf  ../init.d/seatd %{sysconfdir}/rc.d/rc1.d/K30seatd
  ln -sf  ../init.d/seatd %{sysconfdir}/rc.d/rc2.d/S29seatd
  ln -sf  ../init.d/seatd %{sysconfdir}/rc.d/rc3.d/S29seatd
  ln -sf  ../init.d/seatd %{sysconfdir}/rc.d/rc4.d/S29seatd
  ln -sf  ../init.d/seatd %{sysconfdir}/rc.d/rc5.d/S29seatd
  ln -sf  ../init.d/seatd %{sysconfdir}/rc.d/rc6.d/K30seatd