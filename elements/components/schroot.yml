id: schroot
version: 1.6.10
about: Allows users to execute shell commands under different root filesystems. (Successor
  to dchroot)
release: 0
depends:
- components/libboost.yml
- components/e2fsprogs.yml
- components/lockdev.yml
- components/pam.yml
build-time:
- components/boost.yml
- components/cppunit.yml
sources:
- http://http.debian.net/debian/pool/main/s/%{id}/%{id}_%{version}.orig.tar.xz
- http://http.debian.net/debian/pool/main/s/schroot/schroot_%{version}-{{commit}}.debian.tar.xz
pre-script: |
  cat ../debian/patches/series | while read p; do
    patch -p1 -i ../debian/patches/$p
  done
  patch -p1 -i /files/schroot-cppunit.patch
  patch -p1 -i /files/schroot-gcc8-assert-fix.patch
  ./bootstrap
post-script: patch -i /files/pam.d.schroot.patch %{install-root}%{sysconfdir}/pam.d/schroot
configure: |
  --enable-dchroot --enable-lvm-snapshot --enable-btfs-snapshot --with-bash-completion-dir=%{datadir}/bash-completion/completions/ BTRFS=/usr/bin/btrfs BTRFSCTL=/usr/bin/btrfsctl LVCREATE=/usr/bin/lvcreate LVREMOVE=/usr/bin/lvremove

