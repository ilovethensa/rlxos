id: ostree
version: 2023.6
about: Operating system and container binary deployment and upgrade

environ:
  - NOCONFIGURE=1

script: |-
  ./configure --prefix=%{prefix} \
    --sysconfdir=%{sysconfdir} \
    --localstatedir=%{localstatedir} \
    --sbindir=%{bindir} \
    --libexecdir=%{libdir} \
    --disable-static \
    --enable-experimental-api \
    --enable-gtk-doc \
    --with-curl \
    --with-dracut \
    --with-ed25519-libsodium \
    --with-grub2-mkconfig-path=/usr/bin/grub-mkconfig \
    --with-modern-grub \
    --with-openssl

  make

  make DESTDIR=%{install-root} install

depends:
  - components/fuse.yml
  - components/glibc.yml
  - components/libarchive.yml
  - components/libsodium.yml
  - components/avahi.yml
  - components/libgpg-error.yml
  - components/openssl.yml
  - components/util-linux.yml
  - components/gpgme.yml
  - components/libsoup.yml
  - components/xz.yml
  - components/zlib.yml
build-depends:
  - components/gtk-doc.yml
  - components/e2fsprogs.yml
sources:
  - https://github.com/ostreedev/ostree/releases/download/v%{version}/libostree-%{version}.tar.xz
