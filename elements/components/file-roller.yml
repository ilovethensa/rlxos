id: file-roller
version: 3.40.0
about: |
  An archive manager for GNOME with support for tar, bzip2, gzip, zip, jar, compress, lzop, zstd, and many other archive formats
release: 0
build-time:
- components/gtk.yml
- components/itstool.yml
- components/cpio.yml
- components/desktop-file-utils.yml
- components/json-glib.yml
- components/libarchive.yml
- components/libnotify.yml
- components/appimagetool.yml
sources:
- https://download.gnome.org/sources/file-roller/3.40/file-roller-%{version}.tar.xz
post-script: |-
  chmod -v 0755 %{install-root}/usr/lib/file-roller/isoinfo.sh
  cp /files/file-roller.svg %{install-root}/file-roller.png
  cp %{install-root}%{datadir}/applications/org.gnome.FileRoller.desktop %{install-root}/file-roller.desktop

  sed -i 's|Icon=.*|Icon=file-roller|' %{install-root}/file-roller.desktop
  sed -i 's|TryExec=.*||' %{install-root}/file-roller.desktop
  glib-compile-schemas %{install-root}%{datadir}/glib-2.0/schemas/

  rm %{install-root}%{datadir}/help -r
  rm %{install-root}%{datadir}/metainfo/ -r

  install -v -D -m 0755 /files/AppRun -t %{install-root}/
configure: --buildtype=release -D packagekit=false

