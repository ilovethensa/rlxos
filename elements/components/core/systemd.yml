id: systemd
version: 253
about: Package contains programs for controlling the startup, running, and shutdown of the system

environ:
  - LANG=en_IN.UTF-8
  - PKG_CONFIG_PATH="%{libdir}/pkgconfig"

pre-script: |
  sed '/bus_message_type_from_string/s/_pure_//' \
    -i src/libsystemd/sd-bus/bus-internal.h    &&
  sed '/devt_hash_func/s/_pure_//'               \
      -i src/basic/hash-funcs.h                  &&
  sed '/job_get_timeout/s/_pure_//'              \
      -i src/core/job.h

  sed -i -e 's/GROUP="render"/GROUP="video"/' \
       -e 's/GROUP="sgx", //' rules.d/50-udev-default.rules.in

configure: >
  -D default-dnssec=no
  -D firstboot=false
  -D install-tests=false
  -D rpmmacrosdir=no
  -D mode=release
  -D dev-kvm-mode=0660
  -D docdir=%{datadir}/doc/system-%{version}

depends:
  - components/core/acl.yml
  - components/core/bash.yml
  - components/core/coreutils.yml
  - components/core/util-linux.yml
  - components/core/diffutils.yml
  - components/core/grep.yml
  - components/core/openssl.yml
  - components/core/libgcrypt.yml
  - components/py/py-jinja2.yml
  - components/core/libcap.yml
  - components/core/sed.yml
  - components/core/gawk.yml
  - components/core/lz4.yml
  - components/core/libseccomp.yml

build-time:
  - components/core/gcc.yml
  - components/core/meson.yml
  - components/core/expat.yml
  - components/core/libxslt.yml
  - components/core/docbook-xsl.yml

sources:
  - https://github.com/systemd/systemd/archive/v%{version}/systemd-%{version}.tar.gz
