id: js78
version: 78.12.0
about: Mozilla's JavaScript engine written in C

depends:
  - components/icu.yml
build-time:
  - components/autoconf-2.13.yml
  - components/rustc.yml
  - components/which.yml
sources:
  - https://archive.mozilla.org/pub/firefox/releases/%{version}esr/source/firefox-%{version}esr.source.tar.xz

post-script: |
  rm -v %{install-root}/%{libdir}/libjs_static.ajs
  sed -i "/@NSPR_CFLAGS@/d" %{install-root}/%{bindir}/js78-config

build-dir: firefox-%{version}/js/src
configure: >
  --prefix=%{prefix}
  --with-intl-api
  --with-system-zlib
  --with-system-icu
  --disable-jemalloc
  --disable-debug-symbols
