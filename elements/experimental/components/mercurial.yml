id: mercurial
version: 6.0
about: A scalable distributed SCM tools
sources:
- https://www.mercurial-scm.org/release/mercurial-{{version}}.tar.gz
build-dir: mercurial-{{version}}
depends:
  buildtime:
  - py-pip
script: "make\nmake -C contrib/chg\n\npip install docutils\n\npython setup.py install\
  \ --root=$pkgupd_pkgdir --optimize=1\nmake DESTDIR=\"${pkgupd_pkgdir}\" PREFIX=/usr\
  \ install\n\nmake -C contrib/chg DESTDIR=${pkgupd_pkgdir} PREFIX=/usr install\n\
  install -m 755 contrib/hg-ssh ${pkgupd_pkgdir}/usr/bin/\ninstall -m 755 contrib/hgk\
  \ ${pkgupd_pkgdir}/usr/bin/\n\ninstall -m 0755 -d ${pkgupd_pkgdir}/etc/profile.d\n\
  echo \"export HG=/usr/bin/hg\" ${pkgupd_pkgdir}/etc/profile.d/mercurial.sh\n\ninstall\
  \ -m 755 -d ${pkgupd_pkgdir}/etc/mercurial\ncat <<-EOF > ${pkgupd_pkgdir}/etc/mercurial/hgrc\n\
  \  [web]\n  cacerts = /etc/ssl/certs/ca-certificates.crt\n  EOF"
