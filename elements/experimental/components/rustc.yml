id: rustc
version: 1.60.0
release: 1
about: Rust programming language is designed to be a safe, concurrent, practical language

depends:
  runtime:
    - curl
    - libllvm
    - llvm
    - libssh
  buildtime:
    - cmake
    - gdb
    - ninja

sources:
  - https://static.rust-lang.org/dist/rustc-{{version}}-src.tar.xz

environ:
  - RUSTFLAS+=" -C link-args=-lffi"
  - LIBSSH2_SYS_USE_PKG_CONFI=1

script: |
  cp ${FILES_DIR}/config.toml .
  python3 ./x.py build --exclude src/tools/miri
  DESTDIR=${pkgupd_pkgdir} python3 ./x.py install

  chown -R root:root ${pkgupd_pkgdir}
  
  