id: amd64-image
about: amd64 Image
merge: [version.yml, elements/include/image.yml]
no-strip: true

variables:
  sysroot: "/sysroot"
  include-root: "/sysroot"
  force-rebuild: true
  initial-commands: |-
    install -vDm0644 /dev/stdin %{include-root}/%{sysconfdir}/environment << "EOF"
    export GTK_CSD=1
    EOF

    install -vDm0644 /dev/stdin %{include-root}/%{libdir}/tmpfiles.d/extra-etc.conf << "EOF"
    C /etc/environment
    EOF


build-depends:
  - components/cryptsetup.yml
  - components/squashfs-tools.yml
  - components/systemd.yml
  - components/libnvme.yml

include:
  # Core
  - components/core.yml
  - components/release-info.yml
  - components/firmware.yml
  - components/tzdata.yml
  - components/grub.yml
  - components/mkinitramfs.yml

  # Utilities
  - components/e2fsprogs.yml
  - components/vim.yml
  - components/squashfs-tools.yml
  - components/wget.yml
  - components/sudo.yml

  # Desktop Environment
  - components/xfce4.yml
  - components/lightdm-gtk-greeter.yml

  # AppImage
  - components/fuse2.yml

  # X11
  - components/x11/xserver.yml
  - components/x11/xinit.yml
  - components/x11/xf86-input-libinput.yml
  - components/x11/xrdb.yml
  - components/x11/iceauth.yml

  # Components
  - components/gvfs.yml
  - components/xdg-user-dirs-gtk.yml

  # Fonts
  - components/fonts/adobe-source-code-pro-fonts.yml
  - components/fonts/noto.yml
  - components/fonts/noto-emoji.yml
  - components/fonts/noto-cjk.yml
  - components/fonts/dejavu-fonts.yml

  # Libraries
  - components/libgtop.yml
  - components/libwnck.yml
  - components/libnotify.yml
  - components/librsvg.yml
  - components/pulseaudio.yml
  - components/upower.yml
  - components/libnvme.yml

  # Apps
  - boards/amd64/apps.yml